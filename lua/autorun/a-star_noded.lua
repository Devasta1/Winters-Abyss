RunConsoleCommand( "building_cubemaps", 1 )

NODEPOS = {
Vector(-13565.34375,12785.5,1030.1875),
Vector(-13575.25,12296.53125,1030.1875),
Vector(-13201.625,12554.125,1030.1875),
Vector(-13250,13049.84375,1030.1875),
Vector(-13568.0625,13211.75,1030.1875),
Vector(-13295.84375,13411.71875,1030.1875),
Vector(-13552.5,13665.53125,1030.1875),
Vector(-13246.1875,13744.40625,1030.1875),
Vector(-12997.25,13572,1030.1875),
Vector(-12889.1875,13164.96875,1030.1875),
Vector(-12864.09375,12718.9375,1030.1875),
Vector(-12928,12346.71875,1030.1875),
Vector(-13163.59375,12059.40625,1030.1875),
Vector(-13545.375,11800.8125,1030.1875),
Vector(-13111.9375,11596.5625,1030.1875),
Vector(-12742.15625,11866.0625,1030.1875),
Vector(-12287.5,11710.90625,1030.1875),
Vector(-12664.6875,11372.53125,1030.1875),
Vector(-13012.375,11159.1875,1030.1875),
Vector(-13397.15625,10872.6875,1030.1875),
Vector(-13900.34375,10915.84375,1030.1875),
Vector(-13488.9375,11312.09375,1030.1875),
Vector(-12985.4375,10719.75,1030.1875),
Vector(-12540.21875,10921.21875,1030.1875),
Vector(-12268.71875,11234.875,1030.1875),
Vector(-11931.625,11035.0625,1030.375),
Vector(-12117.3125,10722.46875,1030.1875),
Vector(-11721.46875,10678.28125,1030.1875),
Vector(-11419.875,10601.96875,1030.1875),
Vector(-11518.5625,11009.8125,1030.1875),
Vector(-11204.28125,10816.96875,1030.1875),
Vector(-11695.3125,11338.78125,1030.1875),
Vector(-11822.40625,11780.875,1030.1875),
Vector(-11446.84375,11664.21875,1030.1875),
Vector(-11255.09375,11314.46875,1030.1875),
Vector(-10770.65625,11078.75,1030.1875),
Vector(-10612.96875,11523.4375,1030.1875),
Vector(-10965.15625,11707.75,1030.1875),
Vector(-11278.6875,12109.15625,1030.1875),
Vector(-10873.625,12148.5,1030.1875),
Vector(-10708.4375,12571.75,1030.1875),
Vector(-11064.59375,12520.4375,1030.1875),
Vector(-11470.375,12399.21875,1030.1875),
Vector(-11480.5,12799.0625,1030.1875),
Vector(-10896.90625,12816.75,1030.1875),
Vector(-11064.875,13037.09375,1030.1875),
Vector(-11468.125,13090.5625,1030.1875),
Vector(-10960.71875,13415.21875,1030.1875),
Vector(-11231.5,13554.375,1030.1875),
Vector(-10690.6875,13756.0625,1030.1875),
Vector(-10974,13828.28125,1030.1875),
Vector(-10897.1875,14255.21875,1030.1875),
Vector(-11220.125,13999.8125,1030.1875),
Vector(-11918.15625,14185.375,1030.1875),
Vector(-11551.75,13798.84375,1030.1875),
Vector(-11804.75,13328.15625,1030.1875),
Vector(-12180.28125,13293.5,1030.1875),
Vector(-12025.5625,13754.1875,1030.1875),
Vector(-12371.75,14089.75,1030.1875),
Vector(-12496.59375,13689.65625,1030.1875),
Vector(-12629.125,13244.03125,1030.1875),
Vector(-12815,13988.125,1030.1875),
Vector(-12665.625,14366.5625,1030.1875),
Vector(-13160.5625,14100.8125,1030.1875),
Vector(-13527.46875,14034.4375,1030.1875),
Vector(-13781.6875,14296.5625,1030.1875),
Vector(-13651.78125,14721.5625,1030.1875),
Vector(-14835.21875,13670.53125,1030.1875),
Vector(-15180.09375,13644.34375,1030.1875),
Vector(-15007.75,14032.4375,1030.1875),
Vector(-14859.34375,14422.03125,1030.1875),
Vector(-15144.34375,14448.0625,1030.1875),
Vector(-15013.09375,14679.5,1030.1875),
Vector(-15067.3125,15088.90625,1030.1875),
Vector(-14763.78125,15150.375,1030.1875),
Vector(-14282.09375,15149.6875,1030.1875),
Vector(-13990.21875,14904.15625,1030.1875),
Vector(-13646.8125,15128.3125,1030.1875),
Vector(-13261.84375,15222.75,1030.1875),
Vector(-12781.28125,15165.5,1030.1875),
Vector(-12805.5625,14690.125,1030.1875),
Vector(-12353.09375,15201.5625,1030.1875),
Vector(-11951.78125,15201.03125,1030.1875),
Vector(-11593.5,15169.25,1030.1875),
Vector(-11202.71875,14926.53125,1030.1875),
Vector(-11018.03125,14626.53125,1030.1875),
Vector(-10459.5625,14284.84375,1030.1875),
Vector(-10642.9375,14517,1030.1875),
Vector(-10663.4375,14898.96875,1030.1875),
Vector(-10365.15625,14606.96875,1030.1875),
Vector(-10083.6875,14433.96875,1030.1875),
Vector(-10372.5,15151.84375,1023.03125),
Vector(-9941.90625,15204.3125,1030.1875),
Vector(-9571.6875,15247.03125,1030.1875),
Vector(-9115.46875,15242.21875,1030.1875),
Vector(-8716.46875,15222.40625,1030.1875),
Vector(-8595.4375,15005.9375,1030.1875),
Vector(-8362.625,15198.125,1030.1875),
Vector(-8141.75,14769.875,1030.1875),
Vector(-8493.9375,14588.59375,1030.1875),
Vector(-8805.0625,14518.78125,1030.1875),
Vector(-9044.1875,14369.59375,1030.1875),
Vector(-9446.9375,14299.96875,1030.1875),
Vector(-8766.5,14033.21875,1030.1875),
Vector(-9253.40625,13920.375,1030.1875),
Vector(-9751.5625,13832.5625,1030.1875),
Vector(-8906.59375,13603.34375,1030.1875),
Vector(-8459.3125,13477.21875,1030.1875),
Vector(-8833.34375,13115.5,1030.1875),
Vector(-9247.84375,12862.46875,1030.1875),
Vector(-9615.84375,12970.375,1030.1875),
Vector(-9949.0625,13239.28125,1030.1875),
Vector(-9966.65625,12812.3125,1030.1875),
Vector(-8779.96875,12654.21875,1030.1875),
Vector(-8710.71875,12207.40625,1031.9375),
Vector(-8235.59375,12242.15625,1030.1875),
Vector(-7794.0625,12243.1875,1030.1875),
Vector(-7772.25,11951.75,1030.1875),
Vector(-8824.59375,11717.90625,1030.1875),
Vector(-8808.5625,11441.9375,1030.1875),
Vector(-8621.28125,11150.90625,1030.1875),
Vector(-8119.3125,11181.0625,1030.1875),
Vector(-8304.84375,10683.6875,1030.1875),
Vector(-9065.09375,10962.1875,1030.1875),
Vector(-8769.40625,10645.78125,1030.1875),
Vector(-8576.40625,10193.28125,1030.1875),
Vector(-9068.5,10338.46875,1030.1875),
Vector(-8965.90625,9901.75,1030.1875),
Vector(-8816.8125,9449.15625,1030.1875),
Vector(-9169.59375,9459.8125,1032.4375),
Vector(-8930.6875,9106.46875,1030.1875),
Vector(-9302.75,9040.625,1030.375),
Vector(-9485.34375,9550.78125,1030.34375),
Vector(-9765.625,9352.46875,1030.1875),
Vector(-9843.78125,10076.21875,1030.1875),
Vector(-9665.25,10314.125,1030.1875),
Vector(-9897.21875,10359.71875,1030.1875),
Vector(-10185.28125,10347.09375,1030.1875),
Vector(-10286.1875,9996.375,1030.1875),
Vector(-10572.21875,10315,1030.1875),
Vector(-10795.1875,10638.4375,1030.1875),
Vector(-9984.4375,9663.34375,1030.1875),
Vector(-10233.75,9235.15625,1029.21875),
Vector(-9689,8947.4375,1030.1875),
Vector(-9495.03125,8656.65625,1030.1875),
Vector(-10126.875,8896.125,1030.1875),
Vector(-9875.8125,8567.78125,1030.1875),
Vector(-10295.96875,8519,1030.1875),
Vector(-10090.53125,8166.15625,1030.1875),
Vector(-9749.65625,8059.53125,1030.1875),
Vector(-9687.03125,7746.71875,1030.1875),
Vector(-9522.53125,7431.03125,1030.1875),
Vector(-9585.78125,7141.125,1030.1875),
Vector(-9816.46875,7063.90625,1030.1875),
Vector(-9849.375,7388.78125,1030.1875),
Vector(-10033.84375,7732.40625,1030.1875),
Vector(-10102.65625,7191.15625,1030.1875),
Vector(-10416.1875,7240.65625,1030.1875),
Vector(-10760.84375,7235.125,1030.1875),
Vector(-10408.25,7644.625,1030.1875),
Vector(-10388.65625,8081.53125,1030.1875),
Vector(-10766.6875,8630.9375,1030.1875),
Vector(-11062.34375,8862.78125,1030.1875),
Vector(-11325.34375,8930.34375,1030.1875),
Vector(-11404.96875,8611.375,1030.1875),
Vector(-11732.1875,8662.8125,1030.1875),
Vector(-11987.09375,8910.53125,1030.1875),
Vector(-12163.03125,8681.09375,1030.1875),
Vector(-12195.28125,8320.21875,1030.1875),
Vector(-12193,8037.71875,1030.1875),
Vector(-12190.625,7795.1875,1030.1875),
Vector(-12187.84375,7506.96875,1030.1875),
Vector(-12076.03125,7190,1030.1875),
Vector(-11856.125,7116.53125,1030.1875),
Vector(-11744.03125,7620.375,1030.1875),
Vector(-11347,7462,1030.1875),
Vector(-11368.125,7166.96875,1030.1875),
Vector(-12405,8929.09375,1030.1875),
Vector(-12617.96875,8676.5625,1030.1875),
Vector(-12816.40625,8885.4375,1030.1875),
Vector(-12999.375,8672.75,1030.1875),
Vector(-13290.6875,8671.9375,1030.1875),
Vector(-13474.5,8382.03125,1030.1875),
Vector(-13591.9375,8637.0625,1030.1875),
Vector(-13400.65625,8917.9375,1030.1875),
Vector(-13454.25,9335.71875,1030.1875),
Vector(-13547.1875,9651,1030.1875),
Vector(-13306,9933.8125,1030.1875),
Vector(-13020.03125,9801.5625,1030.1875),
Vector(-13848.03125,8640.21875,1030.1875),
Vector(-14716.84375,8877.15625,1030.1875),
Vector(-15221.09375,9078.75,1030.1875),
Vector(-15133.09375,8650.71875,1030.1875),
Vector(-14442.78125,8469.5,1030.1875),
Vector(-14139.71875,9181.53125,1030.1875),
Vector(-14491.25,9225.03125,1030.1875),
Vector(-14927.125,9361.875,1030.1875),
Vector(-15053.125,9808.84375,1030.1875),
Vector(-15183.1875,10227.375,1030.1875),
Vector(-15269.3125,10637.25,1030.1875),
Vector(-14654.78125,9742.9375,1030.1875),
Vector(-14212.3125,9644.8125,1030.1875),
Vector(-14232.6875,9974.5,1030.1875),
Vector(-14690.65625,10203.21875,1030.1875),
Vector(-14846.71875,10548.78125,1030.1875),
Vector(-14318.28125,10410.375,1030.1875),
Vector(-14402.40625,10651.59375,1030.1875),
Vector(-14842.1875,10963.5,1030.1875),
Vector(-15193.8125,11188.4375,1030.1875),
Vector(-15235.53125,11630.4375,1030.1875),
Vector(-15262.75,11922.375,1030.1875),
Vector(-15256,12308.03125,1030.1875),
Vector(-15254.875,12558.34375,1030.1875),
Vector(-15252.03125,12822.65625,1030.1875),
Vector(-15250.8125,13069.3125,1030.1875),
Vector(-15249.25,13386.5,1030.1875),
Vector(-7844,14573.40625,1030.1875),
Vector(-7560.65625,14379.5625,1030.1875),
Vector(-7205.71875,14146.96875,1030.1875),
Vector(-6720.09375,13980.40625,1030.1875),
Vector(-6787.28125,14366.5625,1030.1875),
Vector(-6816.78125,14749.125,1030.1875),
Vector(-6815.4375,15176.125,1030.1875),
Vector(-6377.65625,14994.46875,1030.1875),
Vector(-6115.96875,15184.28125,1030.1875),
Vector(-6449.25,14524.84375,1030.1875),
Vector(-6076.9375,14413.3125,1030.1875),
Vector(-6081.875,14749.625,1030.1875),
Vector(-5654.1875,15175.90625,1030.1875),
Vector(-5734.3125,14711.625,1030.1875),
Vector(-5616.5625,14365.875,1030.1875),
Vector(-5230,15182.40625,1030.1875),
Vector(-5294.9375,14713.3125,1030.1875),
Vector(-5196.84375,14318.78125,1030.1875),
Vector(-4797.75,14255.34375,1030.1875),
Vector(-4840.40625,14715.03125,1030.1875),
Vector(-4790.65625,15189.15625,1030.1875),
Vector(-4363.46875,15188.375,1030.1875),
Vector(-4361.4375,14688.25,1030.1875),
Vector(-4977.34375,14009.90625,1030.1875),
Vector(-5021.78125,13671.53125,1030.1875),
Vector(-4751.0625,13610.65625,1030.1875),
Vector(-4658.3125,13123.9375,1030.1875),
Vector(-5090.75,13086.65625,1030.1875),
Vector(-5112.5,13398.78125,1030.1875),
Vector(-5340.21875,13531.78125,1030.1875),
Vector(-5744.53125,13364.6875,1030.1875),
Vector(-5927.15625,13310.5625,1030.1875),
Vector(-5564.25,13116.15625,1030.1875),
Vector(-6692.21875,13690.4375,1030.1875),
Vector(-7118.40625,13677.4375,1030.1875),
Vector(-7116.4375,13342.6875,1030.1875),
Vector(-6744.59375,13341.5625,1030.1875),
Vector(-6674.28125,12931.46875,1030.1875),
Vector(-7040.34375,12900.4375,1030.1875),
Vector(-7389.53125,12782.71875,1030.1875),
Vector(-6949.5,12589.03125,1030.1875),
Vector(-6620.625,12567.4375,1030.1875),
Vector(-6870.21875,12183.40625,1030.1875),
Vector(-6547.34375,12166.78125,1030.1875),
Vector(-6037.6875,12489.1875,1030.1875),
Vector(-5628.625,12536.75,1030.1875),
Vector(-5302.59375,12539.90625,1030.1875),
Vector(-4979.25,12552.125,1030.1875),
Vector(-4709.46875,12569.84375,1030.1875),
Vector(-4650.75,12314.34375,1030.1875),
Vector(-4651.125,11888.75,1030.1875),
Vector(-4952.84375,11949,1030.1875),
Vector(-5392.25,12264.0625,1030.1875),
Vector(-5814.65625,12273.09375,1030.1875),
Vector(-5783.75,11946.3125,1030.1875),
Vector(-5280.28125,11954.3125,1030.1875),
Vector(-4657.875,11548.8125,1030.1875),
Vector(-4660.75,11184.59375,1030.1875),
Vector(-5067.0625,11382.625,1030.1875),
Vector(-5420.21875,11614.21875,1030.1875),
Vector(-5895.59375,11448.96875,1030.1875),
Vector(-5862.75,11119.875,1030.1875),
Vector(-5488.28125,11140.125,1030.1875),
Vector(-4990.53125,10961.625,1030.1875),
Vector(-4665.09375,10829.90625,1030.1875),
Vector(-4783.84375,10682.25,1030.1875),
Vector(-5179.71875,10651.9375,1030.1875),
Vector(-5590.5,10701.75,1030.1875),
Vector(-5838.6875,10776.65625,1030.1875),
Vector(-6580.5,11701.28125,1030.1875),
Vector(-6958.96875,11791.90625,1030.1875),
Vector(-6863.125,11390.15625,1030.1875),
Vector(-6558.09375,11296.40625,1030.1875),
Vector(-6577.75,10976.5,1030.1875),
Vector(-6922.40625,10951.09375,1030.1875),
Vector(-6804.8125,10608.15625,1030.1875),
Vector(-6596.5,10302.3125,1030.1875),
Vector(-6888.28125,9977.46875,1030.1875),
Vector(-6561.8125,9763.71875,1030.1875),
Vector(-6913.25,9546.53125,1030.1875),
Vector(-6494.5625,9459.34375,1030.1875),
Vector(-6794.25,9119.5625,1030.1875),
Vector(-6329.65625,9146.78125,1030.1875),
Vector(-6340.03125,8831.8125,1030.1875),
Vector(-6956.90625,8787,1030.1875),
Vector(-6667.53125,8604.96875,1030.1875),
Vector(-6225.84375,8356.9375,1030.1875),
Vector(-6209.40625,7898.6875,1030.1875),
Vector(-6160.21875,7436.53125,1030.1875),
Vector(-6132.59375,7066.6875,1030.1875),
Vector(-6517.5,7008.84375,1030.1875),
Vector(-6599,7406.46875,1030.1875),
Vector(-6748.40625,7731.65625,1030.1875),
Vector(-7051.15625,7672.09375,1030.1875),
Vector(-7306.125,7986.53125,1030.1875),
Vector(-7396.5625,7686.46875,1030.1875),
Vector(-7602.78125,7215.71875,1030.1875),
Vector(-7175.96875,7381.84375,1030.1875),
Vector(-6825.3125,7048.34375,1030.1875),
Vector(-7181.25,7080.53125,1030.1875),
Vector(-7333.3125,8786.375,1030.1875),
Vector(-7482.8125,8588.8125,1030.1875),
Vector(-7775.25,8880.125,1030.1875),
Vector(-8111.03125,8948.71875,1030.1875),
Vector(-8281.78125,8609.5625,1030.34375),
Vector(-8273.34375,8301.0625,1030.1875),
Vector(-8266.5625,7941.28125,1030.1875),
Vector(-8280.15625,7690.53125,1030.1875),
Vector(-8152.59375,7372.8125,1030.1875),
Vector(-8220.1875,7163.3125,1030.1875),
Vector(-8511.96875,7112.625,1030.1875),
Vector(-8536.84375,7539.21875,1030.1875),
Vector(-8814.40625,7740.3125,1030.1875),
Vector(-8978.53125,7446.96875,1030.1875),
Vector(-8802.25,7130.84375,1030.1875),
Vector(-8492.46875,8940.0625,1030.1875),
Vector(-8996,8674.75,1030.1875)
}
/*
local insert = table.insert
local remove = table.remove
local abs	 = math.abs

function AS_AddNode(nodeMap,vec,radius)
	local Node = {
		pos         = vec,
		range        = radius,
		edges_num     = 0,
		edges         = {}
	}
	
	for nodeid,node in pairs(nodeMap) do
		if (vec:Distance(node.pos) > radius) then continue end
		local tr 	= util.TraceLine({
			start 	= vec,
			endpos 	= node.pos,
			mask 	= MASK_SOLID_BRUSHONLY
		})
		
		if (!tr.Hit) then
			Node.edges_num 				= Node.edges_num + 1
			Node.edges[Node.edges_num] 	= node
			
			node.edges_num 				= node.edges_num + 1
			node.edges[node.edges_num] 	= Node
		end
	end
	
	insert(nodeMap,Node)
end

	function AS_RelinkNodes(nodeMap)
		for sn_id,sn in pairs(nodeMap) do
			sn.edges = {}
			sn.edges_num = 0
			
			for en_id,en in pairs(nodeMap) do
				local tr 	= util.TraceLine({
					start 	= sn.pos,
					endpos 	= en.pos,
					mask 	= MASK_SOLID_BRUSHONLY
				})
				
				if (!tr.Hit) then
					sn.edges_num 			= sn.edges_num+1
					sn.edges[sn.edges_num] 	= en
				end
			end
		end
	end		

	function AS_RemoveNode(nodeMap,vec)
		for nodeid,node in pairs(nodeMap) do
			if (node.pos == vec) then
				remove(nodeMap,nodeid)
			else
				--Remove any associations with this node
				for edgeid,edge in pairs(node.edges) do
					if (edge.pos == vec) then
						node.edges_num = node.edges_num - 1
						remove(node.edges,edgeid)
						break
					end
				end
			end
		end
		
		MsgN("Specified vector "..tostring(vec).." not found in NodeMap.")
	end

	local function CheckEdges(Node,ClosedList,OpenList,ClosedCount,Count)
		local Dat = Node.edges
		
		for k = 1,ClosedCount do
			local v = ClosedList[k]
			
			for k2,v2 in pairs(Dat) do
				if (v == v2) then 
					remove(Dat,k2) 
					Node.edges_num = Node.edges_num-1
				end
				
				if (Node.edges_num <= 0) then return Dat end
			end
		end
		
		for k = 1,Count do
			local v = OpenList[k]
			
			for k2,v2 in pairs(Dat) do
				if (v == v2) then 
					remove(Dat,k2) 
					Node.edges_num = Node.edges_num-1
				end
				
				if (Node.edges_num <= 0) then return Dat end
			end
		end
		
		return Dat
	end

	local function AS_Reconstruct_Path(CheckNodes)
		local Path = {}
		local PathID = {}
		
		local Last = table.getn(CheckNodes)
		PathID[1] = Last

		local i=1
		while (PathID[i]>1) do
			i=i+1
			insert(PathID,i,CheckNodes[PathID[i-1]].par)
		end
		
		for n = table.getn(PathID),1,-1 do
			insert(Path,CheckNodes[PathID[n]])
		end
		
		return Path,CheckNodes
	end

	function AS_FindPath(nodeMap,startpos,endpos)
		nodeMap = table.Copy(nodeMap)
		local StartNode,StartDis
		local EndNode,EndDis
		
		for k,v in pairs(nodeMap) do
			v.g = 1000000
			v.h = 1000000
			
			if (!StartNode or v.pos:Distance(startpos) < StartDis) then 
				StartDis 	= v.pos:Distance(startpos)
				StartNode 	= v 
			end
			
			if (!EndNode or v.pos:Distance(endpos) < EndDis) then 
				EndDis 		= v.pos:Distance(endpos)
				EndNode 	= v 
			end
		end
		
		StartNode.g 	= 0
		StartNode.h 	= StartNode.pos:Distance(EndNode.pos)
		StartNode.f 	= StartNode.h
		StartNode.par 	= 1
		local ClosedList	= {}
		local OpenList 		= {StartNode}
		local Count			= 1
		local ClosedCount	= 0
		local TempG 	  = 0
		local RunTime	  = 0
		
		while (Count > 0 and RunTime < 9000) do
			RunTime = RunTime + 1
			
			local BaseID	  = 1 
			local LowFScore = OpenList[Count].f
			
			for k = 1,Count do
				local v = OpenList[k]
				
				if (v.f <= LowFScore) then
					LowFScore=v.f
					BaseID=k
				end
			end
			
			local CurrentNode = OpenList[BaseID]
			
			ClosedCount = ClosedCount+1
			ClosedList[ClosedCount] = CurrentNode
			
			local Dat = CheckEdges(CurrentNode,ClosedList,OpenList,ClosedCount,Count)
			
			for _,New in pairs(Dat) do
				New.h 	= New.pos:Distance(EndNode.pos)
				New.g 	= TempG+New.pos:Distance(CurrentNode.pos)
				New.f 	= TempG+New.h
				New.par = ClosedCount
				
				Count = Count+1
				OpenList[Count] = New
			end
			
			remove(OpenList,BaseID)
			Count = Count-1
			
			if (ClosedList[ClosedCount] == EndNode) then
				return AS_Reconstruct_Path(ClosedList) 
			end
		end
		
		return nil
	end
	
local zData = {}

if (SERVER) then
	hook.Add("PlayerSpawn", "dfgdfgdfgdfg", function(pl)
		if !IsValid(pl) then return end
		zData = {}
		for X,pos in pairs(NODEPOS) do
			AS_AddNode(zData,pos,550)
		end
		
		AS_TransferNodeData(zData,pl)
	end)
 util.AddNetworkString("TransmitNodeData")
   
    function AS_TransferNodeData(nodeMap,pl)
        if (!IsValid(pl)) then return end
        local num = #nodeMap
      
        net.Start("TransmitNodeData")
            net.WriteUInt(num,32)
            for k,v in pairs(nodeMap) do
                net.WriteVector(v.pos)
                net.WriteUInt(v.range,32)
            end
        net.Send(pl)
    end
	
	function GetNodeMap()
		return zData
	end
end








if (CLIENT) then
	local Data = {}
	local Path = nil
	   
		--TODO: MODIFY THIS TYLER
		net.Receive("TransmitNodeData",function()
			Data = {}
			for i = 1,net.ReadUInt(32) do
				AS_AddNode(Data,net.ReadVector(),net.ReadUInt(32))
			//	print(Data[i].pos)
			end
		end)

	concommand.Add("test_Add_astarnode",function(pl,cmd,arg)
		local tr = pl:GetEyeTrace()
		AS_AddNode(Data,tr.HitPos-tr.Normal*60,400)
	end)


	concommand.Add("test_astarnode",function(pl,cmd,arg)
		if (!Data[1]) then return end
		print("Computing path("..#Data.." nodes)")
		local t = SysTime()
		Path = AS_FindPath(Data,Data[1].pos,pl:GetEyeTrace().HitPos)
		print((SysTime()-t).." secs")
	end)

	local ang 	= Angle(0,0,0)
	local bbox 	= Vector(4,4,4)
	local mat 	= Material("models/debug/debugwhite")
	 
	hook.Add("PostDrawTranslucentRenderables","TestANode",function()
		render.SetMaterial(mat)
		if LocalPlayer():SteamID() == "STEAM_0:0:50535096z" or LocalPlayer():SteamID() == "STEAM_0:1:15708783z" then
			for k,v in pairs(Data) do
				render.DrawBox( v.pos, ang, -bbox, bbox, Color(255,255,255,255), true )
				
				for a,b in pairs(v.edges) do
					render.DrawLine( v.pos, b.pos, Color(255,255,255,255), true )
				end
			end
			
			if (Path) then
				local Prev = nil
				for k,v in pairs(Path) do
					if (Prev) then render.DrawLine( v.pos, Prev, Color(255,0,0,255), true ) end
					Prev = v.pos
				end
			end
		end
	end)
end 
*/

hook.Add("Think", "3232323", function()
	RunConsoleCommand( "building_cubemaps", 1 )
end)